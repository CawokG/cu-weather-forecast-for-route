# **Проект 2.** Веб-сервис с прогнозом погоды для заданного маршрута

Погодные условия могут поменять план путешествия в любой момент. Планировать поездки проще, если заранее знать, что где-то в пути погода испортится: пойдёт дождь или неожиданно похолодает. Ты можешь спроектировать свой веб-сервис, который будет учитывать погоду на маршруте, и использовать его в путешествиях!

**Цель.** Разработай веб-сервис, который предсказывает вероятность плохой погоды для заданного маршрута, используя данные AccuWeather API. Сервис должен предоставлять пользователю удобные визуализации и прогнозы погоды для разных точек маршрута и временных интервалов.

**Основные задачи проекта**
- Настрой рабочее окружение и установи необходимые библиотеки для работы с `Flask` и API.
- Подключись к AccuWeather API, чтобы получать актуальные данные о погоде.
- Разработай модель, чтобы на основе параметров погоды определять неблагоприятные погодные условия.
- Протестируй веб-сервис для различных маршрутов и продумай возможные пути оптимизации (обработку ошибок, дополнительные функции для улучшения пользовательского опыта).


Источник данных: [AccuWeather](https://developer.accuweather.com/accuweather-forecast-api/apis).
## Формат сдачи проекта

<!-- Аналитики данных не только находят инсайты, но и умеют их доносить.  -->
<!-- Чтобы результаты работы были понятны другим (коллегам, заказчикам или даже тебе через месяц), придерживайся следующих правил: -->

- Выполняй проект в IDE.
- Делай точечные коммиты для отслеживания изменений в проекте.
- Выложи решение на GitHub и сдай на проверку ссылку на репозиторий. Проверь, что репозиторий публичный и доступен для просмотра.  

<!-- Правильное оформление ноутбука — это твой инструмент, чтобы идеи и результаты были понятны другим, будь то коллеги, заказчики или даже ты сам через пару месяцев. -->

<!-- * Оформи проект в отдельном ноутбуке или проектом в IDE.

* Разделяй проект на логичные блоки с помощью заголовков.

* Перед каждым блоком кода добавляй краткое описание, которое объясняет:
  - что ты собираешься сделать,
  - зачем это нужно.

* Всегда добавляй комментарии к коду. -->

<!-- * В конце добавь раздел с выводами. В нём нужно кратко описать ключевые инсайты и результаты твоего анализа. -->

<!-- 1. **Заголовки**: четко разделяй проект на логичные блоки с помощью заголовков. Это поможет легко ориентироваться в содержании и понимать, о чем каждый раздел.

2. **Описание**: перед каждым блоком кода добавляй краткое описание, которое объясняет, что ты собираешься сделать и зачем это нужно. Это помогает лучше понять ход анализа. -->

<!-- 3. **Комментарии к коду**: всегда добавляй комментарии к коду. Это позволит любому человеку, включая тебя самого в будущем, быстро понять, что делает каждая строка или блок кода.

4. **Выводы**: не забудь выделить раздел для выводов. Здесь нужно кратко описать ключевые инсайты и результаты, которые ты нашел в ходе анализа. Это поможет закрепить основные моменты и подвести итоги работы. -->
## Оценивание проекта

Преподаватель оценивает проект на основе критериев, которые указаны под каждым заданием. Баллы за выполнение всех заданий суммируются и конвертируются в итоговую оценку по **10-балльной** шкале.

Максимальное количество баллов за проект — **100 баллов**.

Таблица конвертации 100-балльной оценки в 10-балльную шкалу:

| Баллы | Оценка |
|----------------------------|---------------------------|
| 91–100                      | 10                        |
| 81–90                       | 9                         |
| 71–80                       | 8                         |
| 61–70                       | 7                         |
| 51–60                       | 6                         |
| 41–50                       | 5                         |
| 31–40                       | 4                         |
| 21–30                       | 3                         |
| 11–20                       | 2                         |
| 1–10                        | 1                         |
| 0                           | 0                         |

## Настройка окружения, подключение к API AccuWeather, получение данных о погоде

Первый шаг в создании веб-сервиса — это получить данные о погоде с помощью AccuWeather API.


1. Зарегистрируйся на [AccuWeather API](https://developer.accuweather.com/) и получи свой API-ключ. Ознакомься с документацией и ограничениями работы API по количеству запросов. Расходуй доступные ресурсы рационально.
2. Установи необходимые библиотеки: `Flask`, `requests`. Убедись, что `Flask` работает корректно и может запустить простейший веб-сервис.
3. С помощью библиотеки `requests` сделай запрос к API и получи данные о погоде по заданным координатам (широта и долгота).
4. Преобразуй полученные данные в формат JSON, чтобы продолжить работу с ними.
5. Сохрани ключевые параметры прогноза погоды:

    - температура в градусах Цельсия,

    - влажность (процентное содержание),

    - скорость ветра,

    - вероятность дождя в процентах.


### Критерии оценки

1. **Получение API-ключа и установка библиотек — 4 балла:**
   - Студент успешно зарегистрировался и получил API-ключ (1 балл).
   - Нет ошибок при получении доступа к API (2 балла).
   - Все необходимые библиотеки установлены без ошибок (1 балл).

2. **Использование библиотеки `requests` для запроса данных — 8 баллов:**
   - Студент правильно использовал библиотеку для отправки HTTP-запросов к API.
   - Полученные данные корректно загружены в Python.

3. **Преобразование данных в читабельный формат — 6 баллов:**
   - Данные представлены в удобном виде для дальнейшего анализа.

5. **Дополнительные критерии (опционально, 2 балла):**
   - Студент использовал дополнительные методы для проверки API (например, тестовые запросы на другие точки) (1 балл).
   - Оформление кода и результатов выполнено с использованием документации, комментариев и других принятых стандартов (1 балл).

Максимальный балл, который можно получить за задание — **20 баллов.**
## Разработка модели для оценки неблагоприятных погодных условий

Для создания веб-сервиса важно определить критерии плохих погодных условий. Это задание предполагает разработку логики, которая будет классифицировать погодные условия как «хорошие» или «плохие» на основе метеорологических параметров.

- Определи ключевые метеорологические параметры, которые определяют плохие погодные условия.
- Разработай простую логику, которая будет определять, когда погодные условия считаются неблагоприятными. Пример логики:

  - температура ниже 0°C или выше 35°C,

  - скорость ветра выше 50 км/ч,

  - вероятность осадков выше 70%.

- Реализуй модель в виде функции, которая принимает на вход параметры погоды (температура, ветер, осадки) и возвращает результат: плохие или хорошие погодные условия. Учитывай, что:
  - Модель оценки, которую ты разработал (например, функция `check_bad_weather`), должна быть вызвана каждый раз, когда пользователь вводит маршрут (начальные и конечные точки).
  - Обработчик запросов в Flask использует данные из API для передачи в модель. То есть, когда пользователь отправляет запрос, сервер получает прогноз погоды через API, передаёт его в модель для анализа, а затем возвращает результат пользователю через веб-интерфейс.
- Проверка модели:
  - Проведи проверки работосопосбности модели с крайними значениями (например, с очень низкой или очень высокой температурой), чтобы убедиться, что модель корректно обрабатывает такие случаи.
  - Подумай, можно ли улучшить логику модели. Например, можно добавить дополнительные параметры или настроить более сложные правила.



<!-- **Ответь на вопросы:**

1. Какие погодные параметры чаще всего считаются неблагоприятными для путешествий?
2. Как лучше всего выбрать пороговые значения для этих параметров?
3. Какие есть пути для улучшения модели, чтобы она более точно отражала реальные погодные условия? -->

### Критерии оценки

1. **Определение ключевых метеорологических параметров — 8 баллов:**
   - Параметры корректно выделены.

2. **Разработка логики оценки — 7 баллов:**

   - Разработана корректная пороговая логика для классификации погодных условий.

3. **Реализация модели — 10 баллов:**

   - Логика успешно интегрирована в код, пользователь получает корректную оценку погодных условий на основе введённых данных.

4. **Проверка — 5 баллов:**

  - Модель проверена и не выдаёт ошибок (3 балла).

  - Проверка охватывает крайние случаи (например, очень холодная или жаркая погода, сильный ветер и осадки) (2 балла).


Максимальный балл, который можно получить за задание — **30 баллов.**
## Разработка веб-интерфейса на Flask

На этом этапе создаётся веб-интерфейс, через который пользователи смогут вводить начальную и конечную точки маршрута и получать данные о погодных условиях по заданным координатам.

- Создай HTML-форму с полями для ввода начальной и конечной точки маршрута (например, названия городов).
- Реализуй обработку POST-запросов через Flask. Когда пользователь вводит данные в форму и нажимает кнопку, сервер должен получить данные и передать их для дальнейшей обработки.
- Обработай данные, введённые пользователем (например, названия городов), и отправь их в модель оценки погодных условий.
- Получи погодные данные с API и передай их в модель оценки погодных условий, чтобы определить, являются ли условия неблагоприятными.
- Отображай результаты оценки (например, текстом: «Погода — супер» или «Ой-ой, погода плохая») на новой странице или обновляй текущую страницу после отправки формы.
- Реализуй удобный и понятный интерфейс, где данные будут отображаться для пользователя.

**Примечание.** Если запрос к API не удался или произошла ошибка (например, неправильные координаты), необходимо обработать такие случаи и выдать пользователю сообщение о том, что данные недоступны. Для этого можно использовать `try-except` блоки в Python для обработки исключений при вызове API или передаче данных в модель.

### **Критерии оценки**

1. **Создание HTML-формы — 10 баллов:**
	- Форма корректно разработана и позволяет пользователю вводить начальную и конечную точки (6 баллов).
	- Форма включает базовую валидацию данных (4 балла).
2. **Настройка обработки данных — 10 баллов:**
	- Обработчик POST-запросов работает корректно, данные передаются на сервер и обрабатываются (6 баллов).
	- Данные вводятся, валидируются и передаются на сервер без ошибок (4 балла).
3. **Интеграция модели — 10 баллов:**
	- Модель оценки погодных условий корректно интегрирована в веб-приложение (4 балла).
	- Результаты работы модели (оценка погодных условий) отображаются в удобной и понятной форме (3 балла).
	- Интерфейс веб-страницы аккуратен и понятен для пользователя (3 балла).

Максимальный балл за задание — **30 баллов.**
## Проверка работоспособности и обработка ошибок

В этом задании нужно протестировать веб-сервис и реализовать обработку возможных ошибок, которые могут возникнуть при вводе данных или взаимодействии с API.

- Проверь вручную работу всех компонентов веб-сервиса с разными данными (например, те, что ты уже использовал ранее, когда проверял корректные и некорректные названия городов). Добавь новые методы.

- Убедись, что сервис корректно реагирует на различные сценарии. Добавь обработку ошибок, возникающих при запросах к API (например, недоступность API, проблемы с сетью).

- Выведи пользователю понятные сообщения об ошибках, чтобы он мог исправить свои действия (например, «Упс. Неверно введён город», «Ошибка подключения к серверу»).

- В файле `README.md` опиши, какие ошибки ты обработал в рамках проверки работоспособности и каким образом появление ошибки влияет на общую работоспособность системы.



### Критерии оценки

1. **Проведение проверки — 8 баллов:**

  - Веб-сервис проверен на различных сценариях ввода данных (4 балла).

  - Все компоненты работают корректно и не выявлены ошибки (4 балла).

2. **Реализация обработки ошибок — 8 баллов:**

	- Реализована обработка ошибок ввода данных и взаимодействия с API (4 балла).

	- Сервис корректно сообщает об ошибках пользователю, а не завершается с ошибками (2 балла).

    - В файле `README.md` описана проверка работоспособности системы (2 балла).

3. **Отображение сообщений об ошибках — 4 балла:**
  - Пользователь получает понятные и информативные сообщения об ошибках.

Максимальный балл за задание — **20 баллов.**
